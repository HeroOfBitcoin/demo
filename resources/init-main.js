var statepause='play',stateff=!1,isMobile=!1,actioncontrolorient=!1,virtualControlsEnabled=!1,autoPaused=!1,initialLoad=!0,params=new Proxy(new URLSearchParams(window.location.search),{get:(a,b)=>a.get(b)}),query_select_rom=params.rom,query_select_save=params.save,accesstoken=null,islandscape=!1,debugShortCircuit=!1,emulator,menu_btn,sidebar,container,dpad_right,dpad_up,dpad_left,dpad_down,dpad_a_button,dpad_b_button,dpad_l_button,dpad_r_button,dpad_start_button,dpad_select_button;refreshAccessToken(),emulator=processCoreChoiceConf(),emulator.invalid&&console.log('failed to create emulator:',emulator.errors),processEmulatorDefaultKeyBindings(),$('#savestateslot').val(localStorage.getItem('current-save-state-slot')||0),processExtraControlsConf(!1),window.mobileCheck=function(){let a=!1;return function(b){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(b)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(b.substr(0,4)))&&(a=!0)}(navigator.userAgent||navigator.vendor||window.opera),a},$(window).focus(function(){if(emulator.IsDebugActive()||debugShortCircuit)return;emulator.IsRunning()&&autoPaused&&(buttonPlayPress(!1),autoPaused=!1)}),$(window).blur(function(){if(emulator.IsDebugActive()||debugShortCircuit)return;emulator.IsRunning()&&!emulator.GetPaused()&&!autoPaused&&(buttonPlayPress(!1),autoPaused=!0)}),menu_btn=document.querySelector('#menu-btn'),sidebar=document.querySelector('#sidebar'),container=document.querySelector('.nav-container'),dpad_right=document.querySelector('#dpadholder > nav > div.right'),dpad_up=document.querySelector('#dpadholder > nav > div.up'),dpad_left=document.querySelector('#dpadholder > nav > div.left'),dpad_down=document.querySelector('#dpadholder > nav > div.down'),dpad_a_button=document.querySelector('#dpadabutton'),dpad_b_button=document.querySelector('#dpadbbutton'),dpad_l_button=document.querySelector('#dpadlbutton'),dpad_r_button=document.querySelector('#dpadrbutton'),dpad_start_button=document.querySelector('#dpadstartbutton'),dpad_select_button=document.querySelector('#dpadselectbutton'),window.mobileCheck()&&(window.oncontextmenu=function(){return!1},isMobile=!0,handleOrientationChange(window.orientation,!0),$('#sidenavcleardismiss').toggle('active'),enableVirtualControls(),disableVirtualControlsMenuNode()),$('#loginModalButton').click(function(){emulator.DisableKeyboardInput()}),$('#loginModal').on('hide.bs.modal',function(){emulator.EnableKeyboardInput()}),$('#manageSaveStatesButton').click(function(){emulator.DisableKeyboardInput()}),$('#saveStatesModal').on('hide.bs.modal',function(){emulator.EnableKeyboardInput()}),$('#manageCheatsButton').click(function(){emulator.DisableKeyboardInput()}),$('#manageCheatsModal').on('show.bs.modal',function(){processEmulatorCheats()}),$('#manageCheatsModal').on('hide.bs.modal',function(){emulator.EnableKeyboardInput()}),$('#loginForm').on('submit',function(a){a.preventDefault(),login()}),$('#listRomModal').on('show.bs.modal',function(){loadRomList()}),$('#listSaveModal').on('show.bs.modal',function(){loadSaveList()});function initialParamRomandSave(){query_select_rom!=null&&query_select_rom!=''&&(query_select_save!=null&&query_select_save!=''?loadAndRunLocalRom(query_select_rom,query_select_save):loadAndRunLocalRom(query_select_rom,''))}$('#screenwrapper').draggable().resizable({handles:'se,e',aspectRatio:3/2}),$('#actioncontrolpanel').draggable(),$('#dpadholder').draggable({handle:'#dpadhandle'}),$('#dpadabbuttonholder').draggable({handle:'#abbuttonhandle'}),$('#dpadstartselectbuttonholder').draggable({handle:'#startselectbuttonhandle'}),$('#dpadlrbuttonholder').draggable({handle:'#lrbuttonhandle'}),$('#quickreloadvc').draggable({handle:'#quickreloadvcbuttonhandle'}),$('#sendsavetoservervc').draggable({handle:'#sendsavetoservervcbuttonhandle'}),$('#savestatevc').draggable({handle:'#savestatevcbuttonhandle'}),$('#loadstatevc').draggable({handle:'#loadstatevcbuttonhandle'}),emulator.SetPixelated(!0),setDpadEvents([dpad_right,dpad_left,dpad_up,dpad_down,dpad_a_button,dpad_b_button,dpad_l_button,dpad_r_button,dpad_start_button,dpad_select_button]);function handleOrientationChange(a,b=!1){const c=islandscape;if(isMobile){a=='0'?(islandscape=!1,$('#dpadholder').removeClass('clear'),$('#dpadholder').addClass('dark'),removeClearButtonClass(["dpadlrbuttonholder div:not('#lrbuttonhandle')","dpadstartselectbuttonholder div:not('#startselectbuttonhandle')","dpadabbuttonholder div:not('#abbuttonhandle')","sendsavetoservervc div:not('#sendsavetoservervcbuttonhandle')","quickreloadvc div:not('#quickreloadvcbuttonhandle')","savestatevc div:not('#savestatevcbuttonhandle')","loadstatevc div:not('#loadstatevcbuttonhandle')"]),$('#sidebar').removeAttr('style'),$('#menunav').removeAttr('style'),$('#menu-btn').removeAttr('style'),$('.nav-container').removeAttr('style'),$('#screenwrapper').removeAttr('style'),actioncontrolorient=!0,orientActionControlPanel(),setTimeout(()=>{var a=parseInt($('#screenwrapper').css('top'),10)+parseInt($('#screenwrapper').css('height'),10)+(isMobile?0:5)+'px';$('#actioncontrolpanel').css({top:a,left:$('#screenwrapper').css('left')})},'50')):(islandscape=!0,$('#dpadholder').removeClass('dark'),$('#dpadholder').addClass('clear'),addClearButtonClass(["dpadlrbuttonholder div:not('#lrbuttonhandle')","dpadstartselectbuttonholder div:not('#startselectbuttonhandle')","dpadabbuttonholder div:not('#abbuttonhandle')","sendsavetoservervc div:not('#sendsavetoservervcbuttonhandle')","quickreloadvc div:not('#quickreloadvcbuttonhandle')","savestatevc div:not('#savestatevcbuttonhandle')","loadstatevc div:not('#loadstatevcbuttonhandle')"]),$('#sidebar').css('right','-350px'),$('#menunav').css('bottom','25px'),$('#menu-btn').css({'margin-left':'auto','margin-right':'-62px'}),$('.nav-container').css('margin-left','calc(100% - 6rem)'),actioncontrolorient=!1,orientActionControlPanel(),$('#screenwrapper').css({left:parseInt($('#actioncontrolpanel').css('left'),10)+parseInt($('#actioncontrolpanel').css('width'),10)+'px',margin:'inherit'}));const d=c!==islandscape,e=!d&&isMobile;($('#sidenavcleardismiss').is(':visible')||b&&islandscape)&&handleMenuButtonClick(islandscape,e)}}$(window).on('orientationchange',function(a){handleOrientationChange(window.orientation)}),menu_btn.addEventListener('click',()=>{handleMenuButtonClick(islandscape,isMobile)});function handleMenuButtonClick(b,a){islandscape?(sidebar.classList.remove('active-nav'),container.classList.remove('active-cont'),sidebar.classList.toggle('active-nav-landscape'),container.classList.toggle('active-cont-landscape')):(sidebar.classList.remove('active-nav-landscape'),container.classList.remove('active-cont-landscape'),sidebar.classList.toggle('active-nav'),container.classList.toggle('active-cont')),a&&$('#sidenavcleardismiss').toggle('active')}$('#sidenavcleardismiss').click(function(a){a.preventDefault();var b=new Event('click');menu_btn.dispatchEvent(b)});function loadAndRunLocalRom(b,a){a!=null&&a!=''&&loadSaveFromServer(a),loadRomFromServer(b)}function run(a,b=!1){let c=document.getElementById('loader');c.value='',b||($('#collapseOne').collapse('show'),$('#collapseThree').collapse('hide')),emulator.Run(a,function(b){if(b){if(setVolume($('#soundSwitchCheckChecked').is(':checked')?$('#volume_slider').val():0),$('#actioncontrolpanel').fadeIn(),handleOrientationChange(window.orientation),!islandscape){var c=parseInt($('#screenwrapper').css('top'),10)+parseInt($('#screenwrapper').css('height'),10)+(isMobile?0:5)+'px';$('#actioncontrolpanel').css({top:c,left:$('#screenwrapper').css('left')})}enableRunMenuNode(),disablePreMenuNode(),processEmulatorCheats(),initialLoad=!1,a&&a.name&&localStorage.setItem('current-loaded-rom-filename',a.name)}})}function runCredentialsWrapper(a){checkAccessTok()?$('#uploadRomToServerModal').modal('show'):run(a)}function reset(){let a=emulator.Reset();a||setTimeout(()=>{emulator.LCDFade()},50),$('#actioncontrolpanel').fadeOut(),statepause='stop',buttonPlayPress(!0),disableRunMenuNode(),enablePreMenuNode(),isMobile||enableVirtualControls(),$('#collapseTwo').collapse('show')}function uploadSavedataPending(a){a&&a.name&&localStorage.setItem('current-loaded-save-filename',a.name),emulator.LoadSave(a)}function uploadSavedataPendingCredentialsWrapper(a){checkAccessTok()?$('#uploadSaveToServerModal').modal('show'):uploadSavedataPending(a)}function togglePause(){emulator.GetPaused()?emulator.Resume():emulator.Pause()}function setVolume(a){a=Math.pow(2,a)-1,emulator.SetVolume(a)}function setFastForward(a){let b=a?0:16;emulator.SetFastForward(0,b)}function enableDebug(){emulator.EnableDebug()}function enableRunMenuNode(){enableMenuNodesById(['ingameactionsmenu'])}function disableRunMenuNode(){$('#collapseOne').collapse('hide'),disableMenuNodesById(['ingameactionsmenu'])}function disablePreMenuNode(){$('#collapseTwo').collapse('hide'),disableMenuNodesById(['pregameactionsmenu'])}function enablePreMenuNode(){enableMenuNodesById(['pregameactionsmenu'])}function disableVirtualControlsMenuNode(){disableMenuNodesById(['virtualcontrolsmenu'])}function enableDpad(){$('#dpadholder').fadeIn()}function disableDpad(){$('#dpadholder').fadeOut()}function enableDpadButtons(){$('#dpadabbuttonholder').fadeIn(),$('#dpadstartselectbuttonholder').fadeIn(),$('#dpadlrbuttonholder').fadeIn()}function disableDpadButtons(){$('#dpadabbuttonholder').fadeOut(),$('#dpadstartselectbuttonholder').fadeOut(),$('#dpadlrbuttonholder').fadeOut()}function enableLogoutRomSaveQuickServerMenuNodes(){enableMenuNodesById(['serverlogout','loadserverrom','loadserversave','sendsavetoserver','quickreloadserver']),enableLoggedInVirtualControls()}function offlineEnableRomSaveServerMenuNodes(){enableMenuNodesById(['loadserverrom','loadserversave','quickreloadserver']),enableLoggedInVirtualControls()}function disableLogoutRomSaveServerMenuNodes(){disableMenuNodesById(['serverlogout','loadserverrom','loadserversave','sendsavetoserver','quickreloadserver']),disableLoggedInVirtualControls()}function enableMenuNodesById(a){a.forEach(function(a){$('#'+a).removeClass('disabled'),$('#'+a).addClass('enabled')})}function disableMenuNodesById(a){a.forEach(function(a){$('#'+a).removeClass('enabled'),$('#'+a).addClass('disabled')})}function enableLoggedInVirtualControls(){$('#sendSaveToServerVCConf td:first-child').removeClass('text-muted'),$('#sendSaveToServerVCConf td input').prop('disabled',!1)}function disableLoggedInVirtualControls(){$('#sendSaveToServerVCConf td:first-child').addClass('text-muted'),$('#sendSaveToServerVCConf td input').prop('disabled',!0)}function addClearButtonClass(a){a.forEach(function(a){$('#'+a).addClass('clearbutton')})}function removeClearButtonClass(a){a.forEach(function(a){$('#'+a).removeClass('clearbutton')})}function enableVirtualControls(){virtualControlsEnabled?(disableDpad(),disableDpadButtons(),hideExtraControls(),virtualControlsEnabled=!1):(enableDpad(),enableDpadButtons(),processExtraControlsConf(),virtualControlsEnabled=!0)}document.addEventListener('webkitfullscreenchange',function(){let a=document.getElementById('screen');document.webkitIsFullScreen?a.setAttribute('style','margin: 0;top: 50%;'):a.removeAttribute('style')},!1);const fullScreen=()=>{var a=document.getElementById('screen');void 0===a.requestFullscreen&&(a.requestFullscreen=a.webkitRequestFullscreen||a.webkitRequestFullScreen||a.mozRequestFullScreen||a.msRequestFullscreen),a.requestFullscreen()};function setDpadEvents(c){var a={},b=0;c.forEach(function(d,e){var c=$(d).attr('data-keyid').toLowerCase();d.addEventListener('pointerdown',e=>{b+=1,a[c]=!0,emulator.SimulateKeyDown(c),d.releasePointerCapture(e.pointerId)}),d.addEventListener('pointerup',d=>{b>0&&(b-=1),a[c]=!1,emulator.SimulateKeyUp(c)}),d.addEventListener('pointerenter',e=>{b>0&&(a[c]=!0,emulator.SimulateKeyDown(c),d.releasePointerCapture(e.pointerId))}),d.addEventListener('pointerleave',b=>{a[c]&&(a[c]=!1,emulator.SimulateKeyUp(c),d.releasePointerCapture(b.pointerId))}),d.addEventListener('pointerout',b=>{a[c]&&(a[c]=!1,emulator.SimulateKeyUp(c),d.releasePointerCapture(b.pointerId))}),d.addEventListener('pointercancel',e=>{b>0&&(b-=1),a[c]=!1,emulator.SimulateKeyUp(c),d.releasePointerCapture(e.pointerId)})})}function buttonPlayPress(a){statepause=='stop'?(statepause='play',$('#button_play i').attr('class','fa fa-pause')):statepause=='play'||statepause=='resume'?(statepause='pause',$('#button_play i').attr('class','fa fa-play')):statepause=='pause'&&(statepause='resume',$('#button_play i').attr('class','fa fa-pause')),a||togglePause()}function buttonFastforwardPress(){stateff=!stateff;var a=$('#button_ffw i');stateff?a.attr('class','fa fa-forward'):a.attr('class','fa fa-fast-forward'),setFastForward(stateff)}function orientActionControlPanel(){actioncontrolorient?($('#actioncontrolpanel').css('width','fit-content'),$('#button_rotate label').text('Rotate'),$('#pixelated_check_lbl').text('Pixelate'),actioncontrolorient=!1):($('#actioncontrolpanel').css('width','175px'),$('#button_rotate label').text('Rot.'),$('#pixelated_check_lbl').text('Pix.'),islandscape&&$('#actioncontrolpanel').css({top:'0px',left:'0px'}),actioncontrolorient=!0)}function fillUserKeyBinding(a,b){b.textContent=a.key,$(b).attr('data-keycode',a.keyCode)}function processEmulatorDefaultKeyBindings(){const a=emulator.DefaultKeyBindings();a.forEach(function({descrip:a,keybind:b}){keyBindingElem=`
			<tr>
				<td class="descrip">${a}</td>
				<td
					contenteditable
					class="keybind"
					onkeyup="fillUserKeyBinding(event,this);"
				>
					${b}
				</td>
			</tr>
		`,$(keyBindingElem).appendTo('#controlsTable')})}function remapUserKeyBindings(){$('#controlsTable tr').each(function(){var a=$.trim($(this).find('.descrip').text()),b=$.trim($(this).find('.keybind').attr('data-keycode')),c=$.trim($(this).find('.keybind').text());a!=null&&a!=''&&b!=null&&b!=''&&c!=null&&emulator.RemapKeyBinding(a,b,c)})}function sendCurrentSaveToServer(){var a=emulator.GetCurrentSave(),c,f,b,g;if(!a){alert('No save data available to send');return}c=new Blob([a],{type:'data:application/x-spss-sav'});const d=localStorage.getItem('current-loaded-save-filename'),e=localStorage.getItem('current-loaded-rom-filename').replace('.gba','.sav');f=new File([c],d||e),b=new DataTransfer,b.items.add(f),$('#saveloader')[0].files=b.files,console.log('browser firing onchange event manually'),g=new Event('change'),document.getElementById('saveloader').dispatchEvent(g)}function loadSaveState(a){emulator.LoadSaveState(a),localStorage.setItem('current-save-state-slot',a)}function createSaveState(a){emulator.CreateSaveState(a),localStorage.setItem('current-save-state-slot',a)}function loadCurrentSaveState(){let a=localStorage.getItem('current-save-state-slot');emulator.LoadSaveState(a)}function createCurrentSaveState(){let a=localStorage.getItem('current-save-state-slot');emulator.CreateSaveState(a)}function listSaveStates(){let a=emulator.ListSaveStates();a=a.filter(a=>a!=='.'&&a!=='..'),$('#saveStateList').empty(),a.length&&(a.forEach(function(a,b){$('<li>'+a+'</li>').appendTo('#saveStateList')}),$('#saveStateList').parent().show())}function quickReloadCredentialsWrapper(a){checkAccessTok()?$('#quickReloadServerModal').modal('show'):alert('Please log in to use this feature')}function quickReload(){var a=emulator.QuickReload();a?(setVolume($('#soundSwitchCheckChecked').is(':checked')?$('#volume_slider').val():0),$('#actioncontrolpanel').fadeIn(),handleOrientationChange(window.orientation),enableRunMenuNode(),disablePreMenuNode()):quickReloadServer()}function quickReloadServer(){if(!checkAccessTok())return;const a=localStorage.getItem('current-loaded-save-filename'),b=localStorage.getItem('current-loaded-rom-filename');if(a===''||b===''||a===null||b===null){alert('No current server save/rom filenames');return}emulator.IsRunning()&&(emulator.Reset(),emulator.LCDFade()),query_select_save=a,loadSaveFromServer(query_select_save),query_select_rom=b,loadRomFromServer(query_select_rom)}function newCheatsRow(a='',b='',c=!1){cheatRowElem=`
		<tr class="cheatsRow">
			<td 
				contenteditable
				class="descrip"
				placeholder="Name"
			>${a}</td>
			<td
				contenteditable
				class="cheatCode"
				placeholder="820XXXXX 1234"
			>${b}</td>
			<td class="isCheatActive">
				<input
					type="checkbox"
					${c?'checked':''}
				/>
			</td>
		</tr>
	`,$(cheatRowElem).appendTo('#cheatsTable')}function processEmulatorCheats(){const b=emulator.GetCurrentCheatsFile();if(!b)return;const d=new TextDecoder('utf-8'),c=d.decode(b);$('#rawCheats').val(c);const a=emulator.ParseCheatsString(c);if(!a){$('#rawCheatsTabHeader').tab('show');return}$('#cheatsTable .cheatsRow').remove();for(const c in a){const b=a[c];newCheatsRow(b.desc,b.code,b.enable==='true')}}function saveCheatsToFile(){var a=null,b,c;if($('#rawCheatsTab').hasClass('active'))a=$('#rawCheats').val();else{const b=$('#cheatsTable tr').map(function(a,e){if(a===0)return null;const b=$(this).find('.descrip').text().trim(),c=$(this).find('.cheatCode').text().trim(),d=$(this).find('.isCheatActive input').is(':checked');return!b||b===''||!c||c===''?null:`cheat${a-1}_desc = "${b}"\ncheat${a-1}_enable = ${d}\ncheat${a-1}_code = "${c}"\n`}).toArray();b?.length&&(a=`cheats = ${b?.length}\n\n`+b.join('\n'))}a&&(b=new Blob([a],{type:'text/plain'}),c=new File([b],emulator.GetCurrentCheatsFileName()),emulator.LoadCheatsFile(c))}function saveExtraControlsConf(){const a=['flexCheckQuickReloadVC','flexCheckSendSaveToServerVC','flexCheckSaveStateVC','flexCheckLoadStateVC'];for(extraControl of a)checkVal=$('#'+extraControl).is(':checked'),checkVal?localStorage.setItem(extraControl,JSON.stringify(checkVal)):localStorage.removeItem(extraControl),virtualControlsEnabled&&toggleExtraControl(extraControl,checkVal)}function processExtraControlsConf(a=!0){const b=['flexCheckQuickReloadVC','flexCheckSendSaveToServerVC','flexCheckSaveStateVC','flexCheckLoadStateVC'];for(extraControl of b)savedControl=localStorage.getItem(extraControl),savedControl&&($('#'+extraControl).prop('checked',!0),a&&toggleExtraControl(extraControl,!0))}function hideExtraControls(){const a=['flexCheckQuickReloadVC','flexCheckSendSaveToServerVC','flexCheckSaveStateVC','flexCheckLoadStateVC'];for(extraControl of a)toggleExtraControl(extraControl,!1)}function toggleExtraControl(a,b){extraControlSelector=a.replace('flexCheck','').toLowerCase(),b?$('#'+extraControlSelector).fadeIn():$('#'+extraControlSelector).fadeOut()}function saveCoreChoiceConf(){const a=['flexCheckmGBACore','flexCheckgbaJSCore'];for(coreChoice of a)checkVal=$('#'+coreChoice).is(':checked'),checkVal?localStorage.setItem(coreChoice,JSON.stringify(checkVal)):localStorage.removeItem(coreChoice);return emulator.IsRunning()||location.reload(),!0}function processCoreChoiceConf(){var a=null;const b=['flexCheckmGBACore','flexCheckgbaJSCore'];for(coreChoice of b)savedChoice=localStorage.getItem(coreChoice),savedChoice&&($('#'+coreChoice).prop('checked',!0),emulatorType=$('#'+coreChoice).val(),a=new GameBoyAdvanceEmulator(emulatorType));return a==null&&(a=new GameBoyAdvanceEmulator('mGBA')),a}