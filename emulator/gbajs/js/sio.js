class GameBoyAdvanceSIO{constructor(){this.SIO_NORMAL_8=0,this.SIO_NORMAL_32=1,this.SIO_MULTI=2,this.SIO_UART=3,this.SIO_GPIO=8,this.SIO_JOYBUS=12,this.BAUD=[9600,38400,57600,115200]}clear(){this.mode=this.SIO_GPIO,this.sd=!1,this.irq=!1,this.multiplayer={baud:0,si:0,id:0,error:0,busy:0,states:[65535,65535,65535,65535]},this.linkLayer=null}setMode(a){a&8?a&=12:a&=3,this.mode=a,this.core.INFO('Setting SIO mode to '+hex(a,1))}writeRCNT(a){if(this.mode!=this.SIO_GPIO)return;this.core.STUB('General purpose serial not supported')}writeSIOCNT(a){switch(this.mode){case this.SIO_NORMAL_8:this.core.STUB('8-bit transfer unsupported');break;case this.SIO_NORMAL_32:this.core.STUB('32-bit transfer unsupported');break;case this.SIO_MULTI:this.multiplayer.baud=a&3,this.linkLayer&&this.linkLayer.setBaud(this.BAUD[this.multiplayer.baud]),this.multiplayer.si||(this.multiplayer.busy=a&128,this.linkLayer&&this.multiplayer.busy&&this.linkLayer.startMultiplayerTransfer()),this.irq=a&16384;break;case this.SIO_UART:this.core.STUB('UART unsupported');break;case this.SIO_GPIO:break;case this.SIO_JOYBUS:this.core.STUB('JOY BUS unsupported');break}}readSIOCNT(){var a=this.mode<<12&65535;switch(this.mode){case this.SIO_NORMAL_8:this.core.STUB('8-bit transfer unsupported');break;case this.SIO_NORMAL_32:this.core.STUB('32-bit transfer unsupported');break;case this.SIO_MULTI:a|=this.multiplayer.baud,a|=this.multiplayer.si,a|=!!this.sd<<3,a|=this.multiplayer.id<<4,a|=this.multiplayer.error,a|=this.multiplayer.busy,a|=!!this.multiplayer.irq<<14;break;case this.SIO_UART:this.core.STUB('UART unsupported');break;case this.SIO_GPIO:break;case this.SIO_JOYBUS:this.core.STUB('JOY BUS unsupported');break}return a}read(a){switch(this.mode){case this.SIO_NORMAL_32:this.core.STUB('32-bit transfer unsupported');break;case this.SIO_MULTI:return this.multiplayer.states[a];case this.SIO_UART:this.core.STUB('UART unsupported');break;default:this.core.WARN('Reading from transfer register in unsupported mode');break}return 0}}