class ARMCoreArm{constructor(a){this.cpu=a,this.addressingMode23Immediate=[function(b,f,c){var d=a.gprs,e=function(){var a=d[b];return(!c||c())&&(d[b]-=f),a};return e.writesPC=b==a.PC,e},null,null,null,function(b,f,c){var d=a.gprs,e=function(){var a=d[b];return(!c||c())&&(d[b]+=f),a};return e.writesPC=b==a.PC,e},null,null,null,function(c,d,g){var e=a.gprs,b=function(){return f=e[c]-d},f;return b.writesPC=!1,b},function(b,f,c){var d=a.gprs,e=function(){var a=d[b]-f;return(!c||c())&&(d[b]=a),a};return e.writesPC=b==a.PC,e},null,null,function(c,d,g){var e=a.gprs,b=function(){return f=e[c]+d},f;return b.writesPC=!1,b},function(b,f,c){var d=a.gprs,e=function(){var a=d[b]+f;return(!c||c())&&(d[b]=a),a};return e.writesPC=b==a.PC,e},null,null],this.addressingMode23Register=[function(b,f,d){var c=a.gprs,e=function(){var a=c[b];return(!d||d())&&(c[b]-=c[f]),a};return e.writesPC=b==a.PC,e},null,null,null,function(b,f,d){var c=a.gprs,e=function(){var a=c[b];return(!d||d())&&(c[b]+=c[f]),a};return e.writesPC=b==a.PC,e},null,null,null,function(d,e,f){var b=a.gprs,c=function(){return b[d]-b[e]};return c.writesPC=!1,c},function(b,f,d){var c=a.gprs,e=function(){var a=c[b]-c[f];return(!d||d())&&(c[b]=a),a};return e.writesPC=b==a.PC,e},null,null,function(d,e,f){var b=a.gprs,c=function(){var a=b[d]+b[e];return a};return c.writesPC=!1,c},function(b,f,d){var c=a.gprs,e=function(){var a=c[b]+c[f];return(!d||d())&&(c[b]=a),a};return e.writesPC=b==a.PC,e},null,null],this.addressingMode2RegisterShifted=[function(b,f,c){var d=a.gprs,e=function(){var e=d[b];return(!c||c())&&(f(),d[b]-=a.shifterOperand),e};return e.writesPC=b==a.PC,e},null,null,null,function(b,f,c){var d=a.gprs,e=function(){var e=d[b];return(!c||c())&&(f(),d[b]+=a.shifterOperand),e};return e.writesPC=b==a.PC,e},null,null,null,function(c,d,f){var e=a.gprs,b=function(){return d(),e[c]-a.shifterOperand};return b.writesPC=!1,b},function(b,f,c){var d=a.gprs,e=function(){f();var e=d[b]-a.shifterOperand;return(!c||c())&&(d[b]=e),e};return e.writesPC=b==a.PC,e},null,null,function(c,d,f){var e=a.gprs,b=function(){return d(),e[c]+a.shifterOperand};return b.writesPC=!1,b},function(b,f,c){var d=a.gprs,e=function(){f();var e=d[b]+a.shifterOperand;return(!c||c())&&(d[b]=e),e};return e.writePC=b==a.PC,e},null,null]}constructAddressingMode1ASR(d,b){var a=this.cpu,c=a.gprs;return function(){var e,f;++a.cycles,e=c[d],d==a.PC&&(e+=4),e&=255,f=c[b],b==a.PC&&(f+=4),e==0?(a.shifterOperand=f,a.shifterCarryOut=a.cpsrC):e<32?(a.shifterOperand=f>>e,a.shifterCarryOut=f&1<<e-1):c[b]>>31?(a.shifterOperand=4294967295,a.shifterCarryOut=2147483648):(a.shifterOperand=0,a.shifterCarryOut=0)}}constructAddressingMode1Immediate(b){var a=this.cpu;return function(){a.shifterOperand=b,a.shifterCarryOut=a.cpsrC}}constructAddressingMode1ImmediateRotate(b,c){var a=this.cpu;return function(){a.shifterOperand=b>>>c|b<<32-c,a.shifterCarryOut=a.shifterOperand>>31}}constructAddressingMode1LSL(b,c){var a=this.cpu,d=a.gprs;return function(){var e,f;++a.cycles,e=d[b],b==a.PC&&(e+=4),e&=255,f=d[c],c==a.PC&&(f+=4),e==0?(a.shifterOperand=f,a.shifterCarryOut=a.cpsrC):e<32?(a.shifterOperand=f<<e,a.shifterCarryOut=f&1<<32-e):e==32?(a.shifterOperand=0,a.shifterCarryOut=f&1):(a.shifterOperand=0,a.shifterCarryOut=0)}}constructAddressingMode1LSR(b,c){var a=this.cpu,d=a.gprs;return function(){var e,f;++a.cycles,e=d[b],b==a.PC&&(e+=4),e&=255,f=d[c],c==a.PC&&(f+=4),e==0?(a.shifterOperand=f,a.shifterCarryOut=a.cpsrC):e<32?(a.shifterOperand=f>>>e,a.shifterCarryOut=f&1<<e-1):e==32?(a.shifterOperand=0,a.shifterCarryOut=f>>31):(a.shifterOperand=0,a.shifterCarryOut=0)}}constructAddressingMode1ROR(d,b){var a=this.cpu,c=a.gprs;return function(){var f,e,g;++a.cycles,f=c[d],d==a.PC&&(f+=4),f&=255,e=c[b],b==a.PC&&(e+=4),g=f&31,f==0?(a.shifterOperand=e,a.shifterCarryOut=a.cpsrC):g?(a.shifterOperand=c[b]>>>g|c[b]<<32-g,a.shifterCarryOut=e&1<<g-1):(a.shifterOperand=e,a.shifterCarryOut=e>>31)}}constructAddressingMode23Immediate(a,b,c){var d=(a&983040)>>16;return this.addressingMode23Immediate[(a&27262976)>>21](d,b,c)}constructAddressingMode23Register(a,b,c){var d=(a&983040)>>16;return this.addressingMode23Register[(a&27262976)>>21](d,b,c)}constructAddressingMode2RegisterShifted(a,b,c){var d=(a&983040)>>16;return this.addressingMode2RegisterShifted[(a&27262976)>>21](d,b,c)}constructAddressingMode4(a,b){var c=this.cpu,d=c.gprs;return function(){var c=d[b]+a;return c}}constructAddressingMode4Writeback(c,e,a,f){var d=this.cpu,b=d.gprs;return function(g){var h=b[a]+c;return g&&f&&d.mmu.store32(b[a]+c-4,b[a]),b[a]+=e,h}}constructADC(d,e,f,c){var a=this.cpu,b=a.gprs;return function(){if(a.mmu.waitPrefetch32(b[a.PC]),c&&!c())return;f();var g=(a.shifterOperand>>>0)+!!a.cpsrC;b[d]=(b[e]>>>0)+g}}constructADCS(d,c,f,e){var a=this.cpu,b=a.gprs;return function(){var h,g;if(a.mmu.waitPrefetch32(b[a.PC]),e&&!e())return;f(),h=(a.shifterOperand>>>0)+!!a.cpsrC,g=(b[c]>>>0)+h,d==a.PC&&a.hasSPSR()?a.unpackCPSR(a.spsr):(a.cpsrN=g>>31,a.cpsrZ=!(g&4294967295),a.cpsrC=g>4294967295,a.cpsrV=b[c]>>31==h>>31&&b[c]>>31!=g>>31&&h>>31!=g>>31),b[d]=g}}constructADD(d,e,f,c){var a=this.cpu,b=a.gprs;return function(){if(a.mmu.waitPrefetch32(b[a.PC]),c&&!c())return;f(),b[d]=(b[e]>>>0)+(a.shifterOperand>>>0)}}constructADDS(d,c,f,e){var a=this.cpu,b=a.gprs;return function(){if(a.mmu.waitPrefetch32(b[a.PC]),e&&!e())return;f();var g=(b[c]>>>0)+(a.shifterOperand>>>0);d==a.PC&&a.hasSPSR()?a.unpackCPSR(a.spsr):(a.cpsrN=g>>31,a.cpsrZ=!(g&4294967295),a.cpsrC=g>4294967295,a.cpsrV=b[c]>>31==a.shifterOperand>>31&&b[c]>>31!=g>>31&&a.shifterOperand>>31!=g>>31),b[d]=g}}constructAND(d,e,f,c){var a=this.cpu,b=a.gprs;return function(){if(a.mmu.waitPrefetch32(b[a.PC]),c&&!c())return;f(),b[d]=b[e]&a.shifterOperand}}constructANDS(c,e,f,d){var a=this.cpu,b=a.gprs;return function(){if(a.mmu.waitPrefetch32(b[a.PC]),d&&!d())return;f(),b[c]=b[e]&a.shifterOperand,c==a.PC&&a.hasSPSR()?a.unpackCPSR(a.spsr):(a.cpsrN=b[c]>>31,a.cpsrZ=!(b[c]&4294967295),a.cpsrC=a.shifterCarryOut)}}constructB(d,c){var a=this.cpu,b=a.gprs;return function(){if(c&&!c()){a.mmu.waitPrefetch32(b[a.PC]);return}a.mmu.waitPrefetch32(b[a.PC]),b[a.PC]+=d}}constructBIC(d,e,f,c){var a=this.cpu,b=a.gprs;return function(){if(a.mmu.waitPrefetch32(b[a.PC]),c&&!c())return;f(),b[d]=b[e]&~a.shifterOperand}}constructBICS(c,e,f,d){var a=this.cpu,b=a.gprs;return function(){if(a.mmu.waitPrefetch32(b[a.PC]),d&&!d())return;f(),b[c]=b[e]&~a.shifterOperand,c==a.PC&&a.hasSPSR()?a.unpackCPSR(a.spsr):(a.cpsrN=b[c]>>31,a.cpsrZ=!(b[c]&4294967295),a.cpsrC=a.shifterCarryOut)}}constructBL(d,c){var a=this.cpu,b=a.gprs;return function(){if(c&&!c()){a.mmu.waitPrefetch32(b[a.PC]);return}a.mmu.waitPrefetch32(b[a.PC]),b[a.LR]=b[a.PC]-4,b[a.PC]+=d}}constructBX(c,d){var a=this.cpu,b=a.gprs;return function(){if(d&&!d()){a.mmu.waitPrefetch32(b[a.PC]);return}a.mmu.waitPrefetch32(b[a.PC]),a.switchExecMode(b[c]&1),b[a.PC]=b[c]&4294967294}}constructCMN(f,c,e,d){var a=this.cpu,b=a.gprs;return function(){if(a.mmu.waitPrefetch32(b[a.PC]),d&&!d())return;e();var f=(b[c]>>>0)+(a.shifterOperand>>>0);a.cpsrN=f>>31,a.cpsrZ=!(f&4294967295),a.cpsrC=f>4294967295,a.cpsrV=b[c]>>31==a.shifterOperand>>31&&b[c]>>31!=f>>31&&a.shifterOperand>>31!=f>>31}}constructCMP(f,c,e,d){var a=this.cpu,b=a.gprs;return function(){if(a.mmu.waitPrefetch32(b[a.PC]),d&&!d())return;e();var f=b[c]-a.shifterOperand;a.cpsrN=f>>31,a.cpsrZ=!(f&4294967295),a.cpsrC=b[c]>>>0>=a.shifterOperand>>>0,a.cpsrV=b[c]>>31!=a.shifterOperand>>31&&b[c]>>31!=f>>31}}constructEOR(d,e,f,c){var a=this.cpu,b=a.gprs;return function(){if(a.mmu.waitPrefetch32(b[a.PC]),c&&!c())return;f(),b[d]=b[e]^a.shifterOperand}}constructEORS(c,e,f,d){var a=this.cpu,b=a.gprs;return function(){if(a.mmu.waitPrefetch32(b[a.PC]),d&&!d())return;f(),b[c]=b[e]^a.shifterOperand,c==a.PC&&a.hasSPSR()?a.unpackCPSR(a.spsr):(a.cpsrN=b[c]>>31,a.cpsrZ=!(b[c]&4294967295),a.cpsrC=a.shifterCarryOut)}}constructLDM(e,f,c){var a=this.cpu,d=a.gprs,b=a.mmu;return function(){var h,j,g,i;if(b.waitPrefetch32(d[a.PC]),c&&!c())return;h=f(!1),j=0;for(g=e,i=0;g;g>>=1,++i)g&1&&(d[i]=b.load32(h&4294967292),h+=4,++j);b.waitMulti32(h,j),++a.cycles}}constructLDMS(e,f,c){var a=this.cpu,d=a.gprs,b=a.mmu;return function(){var h,j,k,g,i;if(b.waitPrefetch32(d[a.PC]),c&&!c())return;h=f(!1),j=0,k=a.mode,a.switchMode(a.MODE_SYSTEM);for(g=e,i=0;g;g>>=1,++i)g&1&&(d[i]=b.load32(h&4294967292),h+=4,++j);a.switchMode(k),b.waitMulti32(h,j),++a.cycles}}constructLDR(d,e,b){var a=this.cpu,c=a.gprs;return function(){if(a.mmu.waitPrefetch32(c[a.PC]),b&&!b())return;var f=e();c[d]=a.mmu.load32(f),a.mmu.wait32(f),++a.cycles}}constructLDRB(d,e,b){var a=this.cpu,c=a.gprs;return function(){if(a.mmu.waitPrefetch32(c[a.PC]),b&&!b())return;var f=e();c[d]=a.mmu.loadU8(f),a.mmu.wait(f),++a.cycles}}constructLDRH(d,e,b){var a=this.cpu,c=a.gprs;return function(){if(a.mmu.waitPrefetch32(c[a.PC]),b&&!b())return;var f=e();c[d]=a.mmu.loadU16(f),a.mmu.wait(f),++a.cycles}}constructLDRSB(d,e,b){var a=this.cpu,c=a.gprs;return function(){if(a.mmu.waitPrefetch32(c[a.PC]),b&&!b())return;var f=e();c[d]=a.mmu.load8(f),a.mmu.wait(f),++a.cycles}}constructLDRSH(d,e,b){var a=this.cpu,c=a.gprs;return function(){if(a.mmu.waitPrefetch32(c[a.PC]),b&&!b())return;var f=e();c[d]=a.mmu.load16(f),a.mmu.wait(f),++a.cycles}}constructMLA(g,e,b,d,f){var c=this.cpu,a=c.gprs;return function(){var h,i;if(c.mmu.waitPrefetch32(a[c.PC]),f&&!f())return;++c.cycles,c.mmu.waitMul(b),a[d]&4294901760&&a[b]&4294901760?(h=(a[d]&4294901760)*a[b]&4294967295,i=(a[d]&65535)*a[b]&4294967295,a[g]=h+i+a[e]&4294967295):a[g]=a[d]*a[b]+a[e]}}constructMLAS(e,f,c,d,g){var b=this.cpu,a=b.gprs;return function(){var h,i;if(b.mmu.waitPrefetch32(a[b.PC]),g&&!g())return;++b.cycles,b.mmu.waitMul(c),a[d]&4294901760&&a[c]&4294901760?(h=(a[d]&4294901760)*a[c]&4294967295,i=(a[d]&65535)*a[c]&4294967295,a[e]=h+i+a[f]&4294967295):a[e]=a[d]*a[c]+a[f],b.cpsrN=a[e]>>31,b.cpsrZ=!(a[e]&4294967295)}}constructMOV(d,f,e,b){var a=this.cpu,c=a.gprs;return function(){if(a.mmu.waitPrefetch32(c[a.PC]),b&&!b())return;e(),c[d]=a.shifterOperand}}constructMOVS(b,f,e,d){var a=this.cpu,c=a.gprs;return function(){if(a.mmu.waitPrefetch32(c[a.PC]),d&&!d())return;e(),c[b]=a.shifterOperand,b==a.PC&&a.hasSPSR()?a.unpackCPSR(a.spsr):(a.cpsrN=c[b]>>31,a.cpsrZ=!(c[b]&4294967295),a.cpsrC=a.shifterCarryOut)}}constructMRS(c,e,d){var a=this.cpu,b=a.gprs;return function(){if(a.mmu.waitPrefetch32(b[a.PC]),d&&!d())return;e?b[c]=a.spsr:b[c]=a.packCPSR()}}constructMSR(g,e,b,f,d){var a=this.cpu,c=a.gprs,h=b&65536,i=b&524288;return function(){var j,k;if(a.mmu.waitPrefetch32(c[a.PC]),d&&!d())return;b&33554432?j=f:j=c[g],k=(h?255:0)|(i?4278190080:0),e?(k&=a.USER_MASK|a.PRIV_MASK|a.STATE_MASK,a.spsr=a.spsr&~k|j&k):(k&a.USER_MASK&&(a.cpsrN=j>>31,a.cpsrZ=j&1073741824,a.cpsrC=j&536870912,a.cpsrV=j&268435456),a.mode!=a.MODE_USER&&k&a.PRIV_MASK&&(a.switchMode(j&15|16),a.cpsrI=j&128,a.cpsrF=j&64))}}constructMUL(e,b,c,f){var d=this.cpu,a=d.gprs;return function(){var g,h;if(d.mmu.waitPrefetch32(a[d.PC]),f&&!f())return;d.mmu.waitMul(a[b]),a[c]&4294901760&&a[b]&4294901760?(g=(a[c]&4294901760)*a[b]|0,h=(a[c]&65535)*a[b]|0,a[e]=g+h):a[e]=a[c]*a[b]}}constructMULS(d,c,e,f){var b=this.cpu,a=b.gprs;return function(){var g,h;if(b.mmu.waitPrefetch32(a[b.PC]),f&&!f())return;b.mmu.waitMul(a[c]),a[e]&4294901760&&a[c]&4294901760?(g=(a[e]&4294901760)*a[c]|0,h=(a[e]&65535)*a[c]|0,a[d]=g+h):a[d]=a[e]*a[c],b.cpsrN=a[d]>>31,b.cpsrZ=!(a[d]&4294967295)}}constructMVN(d,f,e,b){var a=this.cpu,c=a.gprs;return function(){if(a.mmu.waitPrefetch32(c[a.PC]),b&&!b())return;e(),c[d]=~a.shifterOperand}}constructMVNS(b,f,e,d){var a=this.cpu,c=a.gprs;return function(){if(a.mmu.waitPrefetch32(c[a.PC]),d&&!d())return;e(),c[b]=~a.shifterOperand,b==a.PC&&a.hasSPSR()?a.unpackCPSR(a.spsr):(a.cpsrN=c[b]>>31,a.cpsrZ=!(c[b]&4294967295),a.cpsrC=a.shifterCarryOut)}}constructORR(d,e,f,c){var a=this.cpu,b=a.gprs;return function(){if(a.mmu.waitPrefetch32(b[a.PC]),c&&!c())return;f(),b[d]=b[e]|a.shifterOperand}}constructORRS(c,e,f,d){var a=this.cpu,b=a.gprs;return function(){if(a.mmu.waitPrefetch32(b[a.PC]),d&&!d())return;f(),b[c]=b[e]|a.shifterOperand,c==a.PC&&a.hasSPSR()?a.unpackCPSR(a.spsr):(a.cpsrN=b[c]>>31,a.cpsrZ=!(b[c]&4294967295),a.cpsrC=a.shifterCarryOut)}}constructRSB(d,e,f,c){var a=this.cpu,b=a.gprs;return function(){if(a.mmu.waitPrefetch32(b[a.PC]),c&&!c())return;f(),b[d]=a.shifterOperand-b[e]}}constructRSBS(d,c,f,e){var a=this.cpu,b=a.gprs;return function(){if(a.mmu.waitPrefetch32(b[a.PC]),e&&!e())return;f();var g=a.shifterOperand-b[c];d==a.PC&&a.hasSPSR()?a.unpackCPSR(a.spsr):(a.cpsrN=g>>31,a.cpsrZ=!(g&4294967295),a.cpsrC=a.shifterOperand>>>0>=b[c]>>>0,a.cpsrV=a.shifterOperand>>31!=b[c]>>31&&a.shifterOperand>>31!=g>>31),b[d]=g}}constructRSC(d,e,f,c){var a=this.cpu,b=a.gprs;return function(){if(a.mmu.waitPrefetch32(b[a.PC]),c&&!c())return;f();var g=(b[e]>>>0)+!a.cpsrC;b[d]=(a.shifterOperand>>>0)-g}}constructRSCS(c,e,f,d){var a=this.cpu,b=a.gprs;return function(){var h,g;if(a.mmu.waitPrefetch32(b[a.PC]),d&&!d())return;f(),h=(b[e]>>>0)+!a.cpsrC,g=(a.shifterOperand>>>0)-h,c==a.PC&&a.hasSPSR()?a.unpackCPSR(a.spsr):(a.cpsrN=g>>31,a.cpsrZ=!(g&4294967295),a.cpsrC=a.shifterOperand>>>0>=g>>>0,a.cpsrV=a.shifterOperand>>31!=h>>31&&a.shifterOperand>>31!=g>>31),b[c]=g}}constructSBC(d,e,f,c){var a=this.cpu,b=a.gprs;return function(){if(a.mmu.waitPrefetch32(b[a.PC]),c&&!c())return;f();var g=(a.shifterOperand>>>0)+!a.cpsrC;b[d]=(b[e]>>>0)-g}}constructSBCS(d,c,f,e){var a=this.cpu,b=a.gprs;return function(){var h,g;if(a.mmu.waitPrefetch32(b[a.PC]),e&&!e())return;f(),h=(a.shifterOperand>>>0)+!a.cpsrC,g=(b[c]>>>0)-h,d==a.PC&&a.hasSPSR()?a.unpackCPSR(a.spsr):(a.cpsrN=g>>31,a.cpsrZ=!(g&4294967295),a.cpsrC=b[c]>>>0>=g>>>0,a.cpsrV=b[c]>>31!=h>>31&&b[c]>>31!=g>>31),b[d]=g}}constructSMLAL(g,f,c,d,e){var b=this.cpu,h=1/4294967296,a=b.gprs;return function(){var j,k,i;if(b.mmu.waitPrefetch32(a[b.PC]),e&&!e())return;b.cycles+=2,b.mmu.waitMul(c),j=(a[d]&4294901760)*a[c],k=(a[d]&65535)*a[c],i=(a[f]>>>0)+j+k,a[f]=i,a[g]+=Math.floor(i*h)}}constructSMLALS(c,e,d,f,g){var b=this.cpu,h=1/4294967296,a=b.gprs;return function(){var j,k,i;if(b.mmu.waitPrefetch32(a[b.PC]),g&&!g())return;b.cycles+=2,b.mmu.waitMul(d),j=(a[f]&4294901760)*a[d],k=(a[f]&65535)*a[d],i=(a[e]>>>0)+j+k,a[e]=i,a[c]+=Math.floor(i*h),b.cpsrN=a[c]>>31,b.cpsrZ=!(a[c]&4294967295||a[e]&4294967295)}}constructSMULL(g,h,c,e,f){var b=this.cpu,d=1/4294967296,a=b.gprs;return function(){var i,j;if(b.mmu.waitPrefetch32(a[b.PC]),f&&!f())return;++b.cycles,b.mmu.waitMul(a[c]),i=((a[e]&4294901760)>>0)*(a[c]>>0),j=((a[e]&65535)>>0)*(a[c]>>0),a[h]=(i&4294967295)+(j&4294967295)&4294967295,a[g]=Math.floor(i*d+j*d)}}constructSMULLS(c,h,d,e,f){var b=this.cpu,g=1/4294967296,a=b.gprs;return function(){var i,j;if(b.mmu.waitPrefetch32(a[b.PC]),f&&!f())return;++b.cycles,b.mmu.waitMul(a[d]),i=((a[e]&4294901760)>>0)*(a[d]>>0),j=((a[e]&65535)>>0)*(a[d]>>0),a[h]=(i&4294967295)+(j&4294967295)&4294967295,a[c]=Math.floor(i*g+j*g),b.cpsrN=a[c]>>31,b.cpsrZ=!(a[c]&4294967295||a[h]&4294967295)}}constructSTM(e,f,d){var a=this.cpu,c=a.gprs,b=a.mmu;return function(){var h,j,g,i;if(d&&!d()){b.waitPrefetch32(c[a.PC]);return}b.wait32(c[a.PC]),h=f(!0),j=0;for(g=e,i=0;g;g>>=1,++i)g&1&&(b.store32(h,c[i]),h+=4,++j);b.waitMulti32(h,j)}}constructSTMS(e,f,d){var a=this.cpu,c=a.gprs,b=a.mmu;return function(){var k,h,j,g,i;if(d&&!d()){b.waitPrefetch32(c[a.PC]);return}b.wait32(c[a.PC]),k=a.mode,h=f(!0),j=0,a.switchMode(a.MODE_SYSTEM);for(g=e,i=0;g;g>>=1,++i)g&1&&(b.store32(h,c[i]),h+=4,++j);a.switchMode(k),b.waitMulti32(h,j)}}constructSTR(d,e,c){var a=this.cpu,b=a.gprs;return function(){if(c&&!c()){a.mmu.waitPrefetch32(b[a.PC]);return}var f=e();a.mmu.store32(f,b[d]),a.mmu.wait32(f),a.mmu.wait32(b[a.PC])}}constructSTRB(d,e,c){var a=this.cpu,b=a.gprs;return function(){if(c&&!c()){a.mmu.waitPrefetch32(b[a.PC]);return}var f=e();a.mmu.store8(f,b[d]),a.mmu.wait(f),a.mmu.wait32(b[a.PC])}}constructSTRH(d,e,c){var a=this.cpu,b=a.gprs;return function(){if(c&&!c()){a.mmu.waitPrefetch32(b[a.PC]);return}var f=e();a.mmu.store16(f,b[d]),a.mmu.wait(f),a.mmu.wait32(b[a.PC])}}constructSUB(d,e,f,c){var a=this.cpu,b=a.gprs;return function(){if(a.mmu.waitPrefetch32(b[a.PC]),c&&!c())return;f(),b[d]=b[e]-a.shifterOperand}}constructSUBS(d,c,f,e){var a=this.cpu,b=a.gprs;return function(){if(a.mmu.waitPrefetch32(b[a.PC]),e&&!e())return;f();var g=b[c]-a.shifterOperand;d==a.PC&&a.hasSPSR()?a.unpackCPSR(a.spsr):(a.cpsrN=g>>31,a.cpsrZ=!(g&4294967295),a.cpsrC=b[c]>>>0>=a.shifterOperand>>>0,a.cpsrV=b[c]>>31!=a.shifterOperand>>31&&b[c]>>31!=g>>31),b[d]=g}}constructSWI(d,b){var a=this.cpu,c=a.gprs;return function(){if(b&&!b()){a.mmu.waitPrefetch32(c[a.PC]);return}a.irq.swi32(d),a.mmu.waitPrefetch32(c[a.PC])}}constructSWP(e,c,f,d){var a=this.cpu,b=a.gprs;return function(){if(a.mmu.waitPrefetch32(b[a.PC]),d&&!d())return;a.mmu.wait32(b[c]),a.mmu.wait32(b[c]);var g=a.mmu.load32(b[c]);a.mmu.store32(b[c],b[f]),b[e]=g,++a.cycles}}constructSWPB(e,c,f,d){var a=this.cpu,b=a.gprs;return function(){if(a.mmu.waitPrefetch32(b[a.PC]),d&&!d())return;a.mmu.wait(b[c]),a.mmu.wait(b[c]);var g=a.mmu.load8(b[c]);a.mmu.store8(b[c],b[f]),b[e]=g,++a.cycles}}constructTEQ(f,d,e,b){var a=this.cpu,c=a.gprs;return function(){if(a.mmu.waitPrefetch32(c[a.PC]),b&&!b())return;e();var f=c[d]^a.shifterOperand;a.cpsrN=f>>31,a.cpsrZ=!(f&4294967295),a.cpsrC=a.shifterCarryOut}}constructTST(f,d,e,b){var a=this.cpu,c=a.gprs;return function(){if(a.mmu.waitPrefetch32(c[a.PC]),b&&!b())return;e();var f=c[d]&a.shifterOperand;a.cpsrN=f>>31,a.cpsrZ=!(f&4294967295),a.cpsrC=a.shifterCarryOut}}constructUMLAL(g,f,c,d,e){var b=this.cpu,h=1/4294967296,a=b.gprs;return function(){var j,k,i;if(b.mmu.waitPrefetch32(a[b.PC]),e&&!e())return;b.cycles+=2,b.mmu.waitMul(c),j=((a[d]&4294901760)>>>0)*(a[c]>>>0),k=(a[d]&65535)*(a[c]>>>0),i=(a[f]>>>0)+j+k,a[f]=i,a[g]+=i*h}}constructUMLALS(c,e,d,f,g){var b=this.cpu,h=1/4294967296,a=b.gprs;return function(){var j,k,i;if(b.mmu.waitPrefetch32(a[b.PC]),g&&!g())return;b.cycles+=2,b.mmu.waitMul(d),j=((a[f]&4294901760)>>>0)*(a[d]>>>0),k=(a[f]&65535)*(a[d]>>>0),i=(a[e]>>>0)+j+k,a[e]=i,a[c]+=i*h,b.cpsrN=a[c]>>31,b.cpsrZ=!(a[c]&4294967295||a[e]&4294967295)}}constructUMULL(g,h,c,e,f){var b=this.cpu,d=1/4294967296,a=b.gprs;return function(){var i,j;if(b.mmu.waitPrefetch32(a[b.PC]),f&&!f())return;++b.cycles,b.mmu.waitMul(a[c]),i=((a[e]&4294901760)>>>0)*(a[c]>>>0),j=((a[e]&65535)>>>0)*(a[c]>>>0),a[h]=(i&4294967295)+(j&4294967295)&4294967295,a[g]=i*d+j*d>>>0}}constructUMULLS(c,h,d,e,f){var b=this.cpu,g=1/4294967296,a=b.gprs;return function(){var i,j;if(b.mmu.waitPrefetch32(a[b.PC]),f&&!f())return;++b.cycles,b.mmu.waitMul(a[d]),i=((a[e]&4294901760)>>>0)*(a[d]>>>0),j=((a[e]&65535)>>>0)*(a[d]>>>0),a[h]=(i&4294967295)+(j&4294967295)&4294967295,a[c]=i*g+j*g>>>0,b.cpsrN=a[c]>>31,b.cpsrZ=!(a[c]&4294967295||a[h]&4294967295)}}}