class ARMCoreThumb{constructor(a){this.cpu=a}constructADC(c,d){var a=this.cpu,b=a.gprs;return function(){var g,h,e,i,f,j;a.mmu.waitPrefetch(b[a.PC]),g=(b[d]>>>0)+!!a.cpsrC,h=b[c],e=(h>>>0)+g,i=h>>31,f=e>>31,j=g>>31,a.cpsrN=f,a.cpsrZ=!(e&4294967295),a.cpsrC=e>4294967295,a.cpsrV=i==j&&i!=f&&j!=f,b[c]=e}}constructADD1(d,c,e){var a=this.cpu,b=a.gprs;return function(){a.mmu.waitPrefetch(b[a.PC]);var f=(b[c]>>>0)+e;a.cpsrN=f>>31,a.cpsrZ=!(f&4294967295),a.cpsrC=f>4294967295,a.cpsrV=!(b[c]>>31)&&(b[c]>>31^f)>>31&&f>>31,b[d]=f}}constructADD2(c,d){var a=this.cpu,b=a.gprs;return function(){a.mmu.waitPrefetch(b[a.PC]);var e=(b[c]>>>0)+d;a.cpsrN=e>>31,a.cpsrZ=!(e&4294967295),a.cpsrC=e>4294967295,a.cpsrV=!(b[c]>>31)&&(b[c]^e)>>31&&(d^e)>>31,b[c]=e}}constructADD3(e,c,d){var b=this.cpu,a=b.gprs;return function(){b.mmu.waitPrefetch(a[b.PC]);var f=(a[c]>>>0)+(a[d]>>>0);b.cpsrN=f>>31,b.cpsrZ=!(f&4294967295),b.cpsrC=f>4294967295,b.cpsrV=!((a[c]^a[d])>>31)&&(a[c]^f)>>31&&(a[d]^f)>>31,a[e]=f}}constructADD4(c,d){var a=this.cpu,b=a.gprs;return function(){a.mmu.waitPrefetch(b[a.PC]),b[c]+=b[d]}}constructADD5(c,d){var a=this.cpu,b=a.gprs;return function(){a.mmu.waitPrefetch(b[a.PC]),b[c]=(b[a.PC]&4294967292)+d}}constructADD6(c,d){var a=this.cpu,b=a.gprs;return function(){a.mmu.waitPrefetch(b[a.PC]),b[c]=b[a.SP]+d}}constructADD7(c){var a=this.cpu,b=a.gprs;return function(){a.mmu.waitPrefetch(b[a.PC]),b[a.SP]+=c}}constructAND(c,d){var b=this.cpu,a=b.gprs;return function(){b.mmu.waitPrefetch(a[b.PC]),a[c]=a[c]&a[d],b.cpsrN=a[c]>>31,b.cpsrZ=!(a[c]&4294967295)}}constructASR1(c,d,e){var b=this.cpu,a=b.gprs;return function(){b.mmu.waitPrefetch(a[b.PC]),e==0?(b.cpsrC=a[d]>>31,b.cpsrC?a[c]=4294967295:a[c]=0):(b.cpsrC=a[d]&1<<e-1,a[c]=a[d]>>e),b.cpsrN=a[c]>>31,b.cpsrZ=!(a[c]&4294967295)}}constructASR2(c,d){var b=this.cpu,a=b.gprs;return function(){b.mmu.waitPrefetch(a[b.PC]);var e=a[d]&255;e&&(e<32?(b.cpsrC=a[c]&1<<e-1,a[c]>>=e):(b.cpsrC=a[c]>>31,b.cpsrC?a[c]=4294967295:a[c]=0)),b.cpsrN=a[c]>>31,b.cpsrZ=!(a[c]&4294967295)}}constructB1(c,d){var a=this.cpu,b=a.gprs;return function(){a.mmu.waitPrefetch(b[a.PC]),d()&&(b[a.PC]+=c)}}constructB2(c){var a=this.cpu,b=a.gprs;return function(){a.mmu.waitPrefetch(b[a.PC]),b[a.PC]+=c}}constructBIC(c,d){var b=this.cpu,a=b.gprs;return function(){b.mmu.waitPrefetch(a[b.PC]),a[c]=a[c]&~a[d],b.cpsrN=a[c]>>31,b.cpsrZ=!(a[c]&4294967295)}}constructBL1(c){var a=this.cpu,b=a.gprs;return function(){a.mmu.waitPrefetch(b[a.PC]),b[a.LR]=b[a.PC]+c}}constructBL2(c){var a=this.cpu,b=a.gprs;return function(){a.mmu.waitPrefetch(b[a.PC]);var d=b[a.PC];b[a.PC]=b[a.LR]+(c<<1),b[a.LR]=d-1}}constructBX(d,c){var a=this.cpu,b=a.gprs;return function(){a.mmu.waitPrefetch(b[a.PC]),a.switchExecMode(b[c]&1);var d=0;c==15&&(d=b[c]&2),b[a.PC]=b[c]&4294967294-d}}constructCMN(c,d){var a=this.cpu,b=a.gprs;return function(){a.mmu.waitPrefetch(b[a.PC]);var e=(b[c]>>>0)+(b[d]>>>0);a.cpsrN=e>>31,a.cpsrZ=!(e&4294967295),a.cpsrC=e>4294967295,a.cpsrV=b[c]>>31==b[d]>>31&&b[c]>>31!=e>>31&&b[d]>>31!=e>>31}}constructCMP1(c,d){var a=this.cpu,b=a.gprs;return function(){a.mmu.waitPrefetch(b[a.PC]);var e=b[c]-d;a.cpsrN=e>>31,a.cpsrZ=!(e&4294967295),a.cpsrC=b[c]>>>0>=d,a.cpsrV=b[c]>>31&&(b[c]^e)>>31}}constructCMP2(c,d){var a=this.cpu,b=a.gprs;return function(){var e,f,g,h,i;a.mmu.waitPrefetch(b[a.PC]),e=b[c],f=b[d],g=e-f,h=g>>31,i=e>>31,a.cpsrN=h,a.cpsrZ=!(g&4294967295),a.cpsrC=e>>>0>=f>>>0,a.cpsrV=i!=f>>31&&i!=h}}constructCMP3(c,d){var b=this.cpu,a=b.gprs;return function(){b.mmu.waitPrefetch(a[b.PC]);var e=a[c]-a[d];b.cpsrN=e>>31,b.cpsrZ=!(e&4294967295),b.cpsrC=a[c]>>>0>=a[d]>>>0,b.cpsrV=(a[c]^a[d])>>31&&(a[c]^e)>>31}}constructEOR(c,d){var b=this.cpu,a=b.gprs;return function(){b.mmu.waitPrefetch(a[b.PC]),a[c]=a[c]^a[d],b.cpsrN=a[c]>>31,b.cpsrZ=!(a[c]&4294967295)}}constructLDMIA(c,d){var a=this.cpu,b=a.gprs;return function(){var e,h,g,f;a.mmu.waitPrefetch(b[a.PC]),e=b[c],h=0;for(g=1,f=0;f<8;g<<=1,++f)d&g&&(b[f]=a.mmu.load32(e),e+=4,++h);a.mmu.waitMulti32(e,h),1<<c&d||(b[c]=e)}}constructLDR1(c,d,e){var a=this.cpu,b=a.gprs;return function(){a.mmu.waitPrefetch(b[a.PC]);var f=b[d]+e;b[c]=a.mmu.load32(f),a.mmu.wait32(f),++a.cycles}}constructLDR2(e,c,d){var a=this.cpu,b=a.gprs;return function(){a.mmu.waitPrefetch(b[a.PC]),b[e]=a.mmu.load32(b[c]+b[d]),a.mmu.wait32(b[c]+b[d]),++a.cycles}}constructLDR3(c,d){var a=this.cpu,b=a.gprs;return function(){a.mmu.waitPrefetch(b[a.PC]),b[c]=a.mmu.load32((b[a.PC]&4294967292)+d),a.mmu.wait32(b[a.PC]),++a.cycles}}constructLDR4(d,c){var a=this.cpu,b=a.gprs;return function(){a.mmu.waitPrefetch(b[a.PC]),b[d]=a.mmu.load32(b[a.SP]+c),a.mmu.wait32(b[a.SP]+c),++a.cycles}}constructLDRB1(c,d,e){var a=this.cpu,b=a.gprs;return function(){var f=b[d]+e;a.mmu.waitPrefetch(b[a.PC]),b[c]=a.mmu.loadU8(f),a.mmu.wait(f),++a.cycles}}constructLDRB2(e,c,d){var a=this.cpu,b=a.gprs;return function(){a.mmu.waitPrefetch(b[a.PC]),b[e]=a.mmu.loadU8(b[c]+b[d]),a.mmu.wait(b[c]+b[d]),++a.cycles}}constructLDRH1(c,d,e){var a=this.cpu,b=a.gprs;return function(){var f=b[d]+e;a.mmu.waitPrefetch(b[a.PC]),b[c]=a.mmu.loadU16(f),a.mmu.wait(f),++a.cycles}}constructLDRH2(e,c,d){var a=this.cpu,b=a.gprs;return function(){a.mmu.waitPrefetch(b[a.PC]),b[e]=a.mmu.loadU16(b[c]+b[d]),a.mmu.wait(b[c]+b[d]),++a.cycles}}constructLDRSB(e,c,d){var a=this.cpu,b=a.gprs;return function(){a.mmu.waitPrefetch(b[a.PC]),b[e]=a.mmu.load8(b[c]+b[d]),a.mmu.wait(b[c]+b[d]),++a.cycles}}constructLDRSH(e,c,d){var a=this.cpu,b=a.gprs;return function(){a.mmu.waitPrefetch(b[a.PC]),b[e]=a.mmu.load16(b[c]+b[d]),a.mmu.wait(b[c]+b[d]),++a.cycles}}constructLSL1(c,d,e){var b=this.cpu,a=b.gprs;return function(){b.mmu.waitPrefetch(a[b.PC]),e==0?a[c]=a[d]:(b.cpsrC=a[d]&1<<32-e,a[c]=a[d]<<e),b.cpsrN=a[c]>>31,b.cpsrZ=!(a[c]&4294967295)}}constructLSL2(c,d){var a=this.cpu,b=a.gprs;return function(){a.mmu.waitPrefetch(b[a.PC]);var e=b[d]&255;e&&(e<32?(a.cpsrC=b[c]&1<<32-e,b[c]<<=e):(e>32?a.cpsrC=0:a.cpsrC=b[c]&1,b[c]=0)),a.cpsrN=b[c]>>31,a.cpsrZ=!(b[c]&4294967295)}}constructLSR1(c,d,e){var a=this.cpu,b=a.gprs;return function(){a.mmu.waitPrefetch(b[a.PC]),e==0?(a.cpsrC=b[d]>>31,b[c]=0):(a.cpsrC=b[d]&1<<e-1,b[c]=b[d]>>>e),a.cpsrN=0,a.cpsrZ=!(b[c]&4294967295)}}constructLSR2(c,d){var a=this.cpu,b=a.gprs;return function(){a.mmu.waitPrefetch(b[a.PC]);var e=b[d]&255;e&&(e<32?(a.cpsrC=b[c]&1<<e-1,b[c]>>>=e):(e>32?a.cpsrC=0:a.cpsrC=b[c]>>31,b[c]=0)),a.cpsrN=b[c]>>31,a.cpsrZ=!(b[c]&4294967295)}}constructMOV1(d,b){var a=this.cpu,c=a.gprs;return function(){a.mmu.waitPrefetch(c[a.PC]),c[d]=b,a.cpsrN=b>>31,a.cpsrZ=!(b&4294967295)}}constructMOV2(c,d,e){var a=this.cpu,b=a.gprs;return function(){a.mmu.waitPrefetch(b[a.PC]);var e=b[d];a.cpsrN=e>>31,a.cpsrZ=!(e&4294967295),a.cpsrC=0,a.cpsrV=0,b[c]=e}}constructMOV3(c,d){var a=this.cpu,b=a.gprs;return function(){a.mmu.waitPrefetch(b[a.PC]),b[c]=b[d]}}constructMUL(b,d){var c=this.cpu,a=c.gprs;return function(){var e,f;c.mmu.waitPrefetch(a[c.PC]),c.mmu.waitMul(a[d]),a[d]&4294901760&&a[b]&4294901760?(e=(a[b]&4294901760)*a[d]&4294967295,f=(a[b]&65535)*a[d]&4294967295,a[b]=e+f&4294967295):a[b]*=a[d],c.cpsrN=a[b]>>31,c.cpsrZ=!(a[b]&4294967295)}}constructMVN(c,d){var a=this.cpu,b=a.gprs;return function(){a.mmu.waitPrefetch(b[a.PC]),b[c]=~b[d],a.cpsrN=b[c]>>31,a.cpsrZ=!(b[c]&4294967295)}}constructNEG(d,c){var a=this.cpu,b=a.gprs;return function(){a.mmu.waitPrefetch(b[a.PC]);var e=-b[c];a.cpsrN=e>>31,a.cpsrZ=!(e&4294967295),a.cpsrC=0>=e>>>0,a.cpsrV=b[c]>>31&&e>>31,b[d]=e}}constructORR(c,d){var b=this.cpu,a=b.gprs;return function(){b.mmu.waitPrefetch(a[b.PC]),a[c]=a[c]|a[d],b.cpsrN=a[c]>>31,b.cpsrZ=!(a[c]&4294967295)}}constructPOP(c,d){var a=this.cpu,b=a.gprs;return function(){var e,g,h,f;a.mmu.waitPrefetch(b[a.PC]),++a.cycles,e=b[a.SP],g=0;for(h=1,f=0;f<8;h<<=1,++f)c&h&&(a.mmu.waitSeq32(e),b[f]=a.mmu.load32(e),e+=4,++g);d&&(b[a.PC]=a.mmu.load32(e)&4294967294,e+=4,++g),a.mmu.waitMulti32(e,g),b[a.SP]=e}}constructPUSH(c,d){var a=this.cpu,b=a.gprs;return function(){var e=b[a.SP]-4,h=0,f,g;a.mmu.waitPrefetch(b[a.PC]),d&&(a.mmu.store32(e,b[a.LR]),e-=4,++h);for(f=128,g=7;f;f>>=1,--g)if(c&f){a.mmu.store32(e,b[g]),e-=4,++h;break}for(f>>=1,--g;f;f>>=1,--g)c&f&&(a.mmu.store32(e,b[g]),e-=4,++h);a.mmu.waitMulti32(e,h),b[a.SP]=e+4}}constructROR(b,d){var c=this.cpu,a=c.gprs;return function(){var f,e;c.mmu.waitPrefetch(a[c.PC]),f=a[d]&255,f&&(e=f&31,e>0?(c.cpsrC=a[b]&1<<e-1,a[b]=a[b]>>>e|a[b]<<32-e):c.cpsrC=a[b]>>31),c.cpsrN=a[b]>>31,c.cpsrZ=!(a[b]&4294967295)}}constructSBC(c,d){var a=this.cpu,b=a.gprs;return function(){var f,e;a.mmu.waitPrefetch(b[a.PC]),f=(b[d]>>>0)+!a.cpsrC,e=(b[c]>>>0)-f,a.cpsrN=e>>31,a.cpsrZ=!(e&4294967295),a.cpsrC=b[c]>>>0>=e>>>0,a.cpsrV=(b[c]^f)>>31&&(b[c]^e)>>31,b[c]=e}}constructSTMIA(c,d){var a=this.cpu,b=a.gprs;return function(){var f,h,g,e;a.mmu.wait(b[a.PC]),f=b[c],h=0;for(g=1,e=0;e<8;g<<=1,++e)if(d&g){a.mmu.store32(f,b[e]),f+=4,++h;break}for(g<<=1,++e;e<8;g<<=1,++e)d&g&&(a.mmu.store32(f,b[e]),f+=4,++h);a.mmu.waitMulti32(f,h),b[c]=f}}constructSTR1(c,d,e){var a=this.cpu,b=a.gprs;return function(){var f=b[d]+e;a.mmu.store32(f,b[c]),a.mmu.wait(b[a.PC]),a.mmu.wait32(f)}}constructSTR2(e,c,d){var b=this.cpu,a=b.gprs;return function(){b.mmu.store32(a[c]+a[d],a[e]),b.mmu.wait(a[b.PC]),b.mmu.wait32(a[c]+a[d])}}constructSTR3(d,c){var a=this.cpu,b=a.gprs;return function(){a.mmu.store32(b[a.SP]+c,b[d]),a.mmu.wait(b[a.PC]),a.mmu.wait32(b[a.SP]+c)}}constructSTRB1(c,d,e){var a=this.cpu,b=a.gprs;return function(){var f=b[d]+e;a.mmu.store8(f,b[c]),a.mmu.wait(b[a.PC]),a.mmu.wait(f)}}constructSTRB2(e,c,d){var b=this.cpu,a=b.gprs;return function(){b.mmu.store8(a[c]+a[d],a[e]),b.mmu.wait(a[b.PC]),b.mmu.wait(a[c]+a[d])}}constructSTRH1(c,d,e){var a=this.cpu,b=a.gprs;return function(){var f=b[d]+e;a.mmu.store16(f,b[c]),a.mmu.wait(b[a.PC]),a.mmu.wait(f)}}constructSTRH2(e,c,d){var b=this.cpu,a=b.gprs;return function(){b.mmu.store16(a[c]+a[d],a[e]),b.mmu.wait(a[b.PC]),b.mmu.wait(a[c]+a[d])}}constructSUB1(e,c,d){var a=this.cpu,b=a.gprs;return function(){a.mmu.waitPrefetch(b[a.PC]);var f=b[c]-d;a.cpsrN=f>>31,a.cpsrZ=!(f&4294967295),a.cpsrC=b[c]>>>0>=d,a.cpsrV=b[c]>>31&&(b[c]^f)>>31,b[e]=f}}constructSUB2(c,d){var a=this.cpu,b=a.gprs;return function(){a.mmu.waitPrefetch(b[a.PC]);var e=b[c]-d;a.cpsrN=e>>31,a.cpsrZ=!(e&4294967295),a.cpsrC=b[c]>>>0>=d,a.cpsrV=b[c]>>31&&(b[c]^e)>>31,b[c]=e}}constructSUB3(e,c,d){var b=this.cpu,a=b.gprs;return function(){b.mmu.waitPrefetch(a[b.PC]);var f=a[c]-a[d];b.cpsrN=f>>31,b.cpsrZ=!(f&4294967295),b.cpsrC=a[c]>>>0>=a[d]>>>0,b.cpsrV=a[c]>>31!=a[d]>>31&&a[c]>>31!=f>>31,a[e]=f}}constructSWI(b){var a=this.cpu,c=a.gprs;return function(){a.irq.swi(b),a.mmu.waitPrefetch(c[a.PC])}}constructTST(c,d){var a=this.cpu,b=a.gprs;return function(){a.mmu.waitPrefetch(b[a.PC]);var e=b[c]&b[d];a.cpsrN=e>>31,a.cpsrZ=!(e&4294967295)}}}